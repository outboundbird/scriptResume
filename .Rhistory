insert_header <- function() {
doc <- rstudioapi::getActiveDocumentContext()
doc_libs <- extract_uniq_libs(doc$contents)
output_files <- extract_uniq_outputs(doc$contents)
input_data <- extract_uniq_inputs(doc$contents)
current_file <- current_fname(doc$path)
header <- sprintf("#Current file: %s # The libaries used: %s. \n#The input data files: %s  \n#The output files are: %s",
paste0(current_file),
paste0(doc_libs, collapse = ", "),
paste0(input_data, collapse = ", "),
paste0(output_files, collapse = ", ") )
rstudioapi::insertText(c(1,1), header)
}
library(scriptResume)
doc <- rstudioapi::getActiveDocumentContext()
doc_libs <- extract_uniq_libs(doc$contents)
output_files <- extract_uniq_outputs(doc$contents)
input_data <- extract_uniq_inputs(doc$contents)
r_version <- version$version.string
create_date <- Sys.Date()
platform <- Sys.info()['sysname']
current_file <- current_fname(doc$path)
sep_line <- paste0(rep("-", 60),collapse = "")
sep_star <- paste0(rep("*", 60),collapse = "")
library(scriptResume)
doc <- rstudioapi::getActiveDocumentContext()
doc_libs <- extract_uniq_libs(doc$contents)
output_files <- extract_uniq_outputs(doc$contents)
input_data <- extract_uniq_inputs(doc$contents)
r_version <- version$version.string
create_date <- Sys.Date()
platform <- Sys.info()['sysname']
current_file <- current_fname(doc$path)
sep_line <- paste0(rep("-", 60),collapse = "")
sep_star <- paste0(rep("*", 60),collapse = "")
header <- sprintf("#%s\n# Property of SANOFI\n#\n# Program name     : %s\n# Description      : \n# \n# Author           : Siying Huang (E0482362)\n#\n# Compound number  : SAR\n# Study code       : SAR\n# Analysis code    : BMK\n#\n# Date completed   : %s \n# Input files      : %s \n#\n# Input programs   : none for now, \n#\n# Packages needed  : %s \n#\n# Outputs created  : %s  \n#\n# R version        : %s\n# Platform         : %s\n# %s\n# Modification status :\n# %s \n# Description: \n# %s",
sep_line,
paste0(current_file),
Sys.Date(),
paste0(input_data, collapse = ", "), # add source data here
paste0(doc_libs, collapse = ", "),
paste0(output_files, collapse = ", "),
version$version.string,
paste(Sys.info()[1:3], collapse = '-'),
sep_star,
paste('In progress',Sys.Date(), 'Siying Huang', sep = ' | '),
sep_star
)
rstudioapi::insertText(c(1,1), header)
sep_line <- paste0(rep("#", 78),collapse = "")
header <- sprintf("#%s\n# Property of SANOFI\n#\n# Program name     : %s\n# Description      : \n# \n# Author           : Siying Huang (E0482362)\n#\n# Compound number  : SAR\n# Study code       : SAR\n# Analysis code    : BMK\n#\n# Date completed   : %s \n# Input files      : %s \n#\n# Input programs   : none for now, \n#\n# Packages needed  : %s \n#\n# Outputs created  : %s  \n#\n# R version        : %s\n# Platform         : %s\n# %s\n# Modification status :\n# %s \n# Description: \n# %s",
sep_line,
paste0(current_file),
Sys.Date(),
paste0(input_data, collapse = ", "), # add source data here
paste0(doc_libs, collapse = ", "),
paste0(output_files, collapse = ", "),
version$version.string,
paste(Sys.info()[1:3], collapse = '-'),
sep_star,
paste('In progress',Sys.Date(), 'Siying Huang', sep = ' | '),
sep_star
)
rstudioapi::insertText(c(1,1), header)
sep_star <- paste0(rep("*", 78),collapse = "")
sep_line <- paste0(rep("=", 78),collapse = "")
header <- sprintf("#%s\n# Property of SANOFI\n#\n# Program name     : %s\n# Description      : \n# \n# Author           : Siying Huang (E0482362)\n#\n# Compound number  : SAR\n# Study code       : SAR\n# Analysis code    : BMK\n#\n# Date completed   : %s \n# Input files      : %s \n#\n# Input programs   : none for now, \n#\n# Packages needed  : %s \n#\n# Outputs created  : %s  \n#\n# R version        : %s\n# Platform         : %s\n# %s\n# Modification status :\n# %s \n# Description: \n# %s",
sep_line,
paste0(current_file),
Sys.Date(),
paste0(input_data, collapse = ", "), # add source data here
paste0(doc_libs, collapse = ", "),
paste0(output_files, collapse = ", "),
version$version.string,
paste(Sys.info()[1:3], collapse = '-'),
sep_star,
paste('In progress',Sys.Date(), 'Siying Huang', sep = ' | '),
sep_star
)
rstudioapi::insertText(c(1,1), header)
doc <- rstudioapi::getActiveDocumentContext()
header <- sprintf("#%s\n# Property of SANOFI\n#\n# Program name     : %s\n# Description      : \n# \n# Author           : Siying Huang (E0482362)\n#\n# Compound number  : SAR\n# Study code       : SAR\n# Analysis code    : BMK\n#\n# Date completed   : %s \n# Input files      : %s \n#\n# Input programs   : %s, \n#\n# Packages needed  : %s \n#\n# Outputs created  : %s  \n#\n# R version        : %s\n# Platform         : %s\n# %s\n# Modification status :\n# %s \n# Description: \n# %s",
sep_line,
paste0(current_file),
Sys.Date(),
paste0(input_data, collapse = ", "),
paste0(src_file, collapse = ", "),
paste0(doc_libs, collapse = ", "),
paste0(output_files, collapse = ", "),
version$version.string,
paste(Sys.info()[1:3], collapse = '-'),
sep_star,
paste('In progress',Sys.Date(), 'Siying Huang', sep = ' | '),
sep_star
)
rstudioapi::insertText(c(1,1), header)
header <- sprintf("#%s\n# Property of SANOFI\n#\n# Program name     : %s\n# Description      : \n# \n# Author           : Siying Huang (E0482362)\n#\n# Compound number  : SAR\n# Study code       : SAR\n# Analysis code    : BMK\n#\n# Date completed   : %s \n# Input files      : %s \n#\n# Input programs   : %s, \n#\n# Packages needed  : %s \n#\n# Outputs created  : %s  \n#\n# R version        : %s\n# Platform         : %s\n# %s\n# Modification status :\n# %s \n# Description: \n# %s",
sep_line,
paste0(current_file),
Sys.Date(),
paste0(input_data, collapse = ", "),
paste0(src_file, collapse = ", "),
paste0(doc_libs, collapse = ", "),
paste0(output_files, collapse = ", "),
version$version.string,
paste(Sys.info()[1:3], collapse = '-'),
sep_star,
paste('In progress',Sys.Date(), 'Siying Huang', sep = ' | '),
sep_star
)
library(scriptResume)
doc <- rstudioapi::getActiveDocumentContext()
doc_libs <- extract_uniq_libs(doc$contents)
output_files <- extract_uniq_outputs(doc$contents)
input_data <- extract_uniq_inputs(doc$contents)
src_file <- extract_uniq_src(doc$contents)
r_version <- version$version.string
create_date <- Sys.Date()
platform <- Sys.info()['sysname']
current_file <- current_fname(doc$path)
sep_line <- paste0(rep("=", 78),collapse = "")
sep_star <- paste0(rep("*", 78),collapse = "")
header <- sprintf("#%s\n# Property of SANOFI\n#\n# Program name     : %s\n# Description      : \n# \n# Author           : Siying Huang (E0482362)\n#\n# Compound number  : SAR\n# Study code       : SAR\n# Analysis code    : BMK\n#\n# Date completed   : %s \n# Input files      : %s \n#\n# Input programs   : %s, \n#\n# Packages needed  : %s \n#\n# Outputs created  : %s  \n#\n# R version        : %s\n# Platform         : %s\n# %s\n# Modification status :\n# %s \n# Description: \n# %s",
sep_line,
paste0(current_file),
Sys.Date(),
paste0(input_data, collapse = ", "),
paste0(src_file, collapse = ", "),
paste0(doc_libs, collapse = ", "),
paste0(output_files, collapse = ", "),
version$version.string,
paste(Sys.info()[1:3], collapse = '-'),
sep_star,
paste('In progress',Sys.Date(), 'Siying Huang', sep = ' | '),
sep_star
)
src_file <- extract_uniq_src(doc$contents)
r_version <- version$version.string
src_file <- extract_uniq_src(doc$contents)
library(scriptResume)
src_file <- extract_uniq_src(doc$contents)
header <- sprintf("#%s\n# Property of SANOFI\n#\n# Program name     : %s\n# Description      : \n# \n# Author           : Siying Huang (E0482362)\n#\n# Compound number  : SAR\n# Study code       : SAR\n# Analysis code    : BMK\n#\n# Date completed   : %s \n# Input files      : %s \n#\n# Input programs   : %s, \n#\n# Packages needed  : %s \n#\n# Outputs created  : %s  \n#\n# R version        : %s\n# Platform         : %s\n# %s\n# Modification status :\n# %s \n# Description: \n# %s",
sep_line,
paste0(current_file),
Sys.Date(),
paste0(input_data, collapse = ", "),
paste0(src_file, collapse = ", "),
paste0(doc_libs, collapse = ", "),
paste0(output_files, collapse = ", "),
version$version.string,
paste(Sys.info()[1:3], collapse = '-'),
sep_star,
paste('In progress',Sys.Date(), 'Siying Huang', sep = ' | '),
sep_star
)
rstudioapi::insertText(c(1,1), header)
header <- sprintf("#%s\n# Property of SANOFI\n#\n# Program name     : %s\n# Description      : \n# \n# Author           : Siying Huang (E0482362)\n#\n# Compound number  : SAR\n# Study code       : SAR\n# Analysis code    : BMK\n#\n# Date completed   : %s \n#\n# Input files      : %s \n#\n# Input programs   : %s, \n#\n# Packages needed  : %s \n#\n# Outputs created  : %s  \n#\n# R version        : %s\n# Platform         : %s\n# %s\n# Modification status :\n# %s \n# Description: \n# %s",
sep_line,
paste0(current_file),
Sys.Date(),
paste0(input_data, collapse = ", "),
paste0(src_file, collapse = ", "),
paste0(doc_libs, collapse = ", "),
paste0(output_files, collapse = ", "),
version$version.string,
paste(Sys.info()[1:3], collapse = '-'),
sep_star,
paste('In progress',Sys.Date(), 'Siying Huang', sep = ' | '),
sep_star
)
rstudioapi::insertText(c(1,1), header)
src_file
paste0(src_file, collapse = ", ")
header <- sprintf("#%s\n# Property of SANOFI\n#\n# Program name     : %s\n# Description      : \n# \n# Author           : Siying Huang (E0482362)\n#\n# Compound number  : SAR\n# Study code       : SAR\n# Analysis code    : BMK\n#\n# Date completed   : %s \n#\n# Input files      : %s \n#\n# Input programs   : %s \n#\n# Packages needed  : %s \n#\n# Outputs created  : %s  \n#\n# R version        : %s\n# Platform         : %s\n# %s\n# Modification status :\n# %s \n# Description: \n# %s",
sep_line,
paste0(current_file),
Sys.Date(),
paste0(input_data, collapse = ", "),
paste0(src_file, collapse = ", "),
paste0(doc_libs, collapse = ", "),
paste0(output_files, collapse = ", "),
version$version.string,
paste(Sys.info()[1:3], collapse = '-'),
sep_star,
paste('In progress',Sys.Date(), 'Siying Huang', sep = ' | '),
sep_star
)
rstudioapi::insertText(c(1,1), header)
library(scriptResume)
doc <- rstudioapi::getActiveDocumentContext()
doc_libs <- extract_uniq_libs(doc$contents)
output_files <- extract_uniq_outputs(doc$contents)
input_data <- extract_uniq_inputs(doc$contents)
src_file <- extract_uniq_src(doc$contents)
current_file <- current_fname(doc$path)
sep_line <- paste0(rep("=", 78),collapse = "")
sep_star <- paste0(rep("*", 78),collapse = "")
header <- sprintf("#%s\n# Property of SANOFI\n#\n# Program name     : %s\n# Description      : \n# \n# Author           : Siying Huang (E0482362)\n#\n# Compound number  : SAR\n# Study code       : SAR\n# Analysis code    : BMK\n#\n# Date completed   : %s \n#\n# Input files      : %s \n#\n# Input programs   : %s \n#\n# Packages needed  : %s \n#\n# Outputs created  : %s  \n#\n# R version        : %s\n# Platform         : %s\n# %s\n# Modification status :\n# %s \n# Description: \n# %s",
sep_line,
paste0(current_file),
Sys.Date(),
paste0(input_data, collapse = ", "),
paste0(src_file, collapse = ", "),
paste0(doc_libs, collapse = ", "),
paste0(output_files, collapse = ", "),
version$version.string,
paste(Sys.info()[1:3], collapse = '-'),
sep_star,
paste('In progress',Sys.Date(), 'Siying Huang', sep = ' | '),
sep_star
)
rstudioapi::insertText(c(1,1), header)
library(scriptResume)
insert_header()
library(scriptResume)
selection2str()
doc <- rstudioapi::getActiveDocumentContext()
doc
id <- doc$id
selected <- doc$selections
selected
selected <- doc$selection
selected
selection2str <- function() {
doc <- rstudioapi::getActiveDocumentContext()
id <- doc$id
selected <- doc$selection
select_pos <- doc$selections[[1]]$range[1]
if (nchar(selected[[1]]$text) > 0) {
output <- tostring(selected[[1]]$text)
} else {
output <- ""
}
rstudioapi::insertText(select_pos, output, id)
}
selection2str()
selection2str <- function() {
doc <- rstudioapi::getActiveDocumentContext()
id <- doc$id
selected <- doc$selection
message(selected)
select_pos <- doc$selections[[1]]$range[1]
if (nchar(selected[[1]]$text) > 0) {
output <- tostring(selected[[1]]$text)
} else {
output <- ""
}
rstudioapi::insertText(select_pos, output, id)
}
selection2str()
selection2str <- function() {
doc <- rstudioapi::getActiveDocumentContext()
id <- doc$id
selected <- doc$selection
message(selected)
select_pos <- doc$selections[[1]]$range[1]
if (nchar(selected$text) > 0) {
print(selected$text)
output <- tostring(selected[[1]]$text)
} else {
output <- ""
}
rstudioapi::insertText(select_pos, output, id)
}
selection2str()
selection2str <- function() {
doc <- rstudioapi::getActiveDocumentContext()
id <- doc$id
selected <- doc$selection[[1]]
message(selected)
select_pos <- doc$selections[[1]]$range[1]
if (nchar(selected$text) > 0) {
print(selected$text)
output <- tostring(selected[[1]]$text)
} else {
output <- ""
}
rstudioapi::insertText(select_pos, output, id)
}
selection2str()
selection2str <- function() {
doc <- rstudioapi::getActiveDocumentContext()
id <- doc$id
selected <- doc$selection[[1]]
message(selected)
select_pos <- doc$selections[[1]]$range[1]
if (nchar(selected$text) > 0) {
print(selected$text)
output <- tostring(selected$text)
} else {
output <- ""
}
rstudioapi::insertText(select_pos, output, id)
}
selection2str()
doc <- rstudioapi::getActiveDocumentContext()
id <- doc$id
selected <- doc$selection[[1]]
selected
message(selected)
nchar(selected$text)
print(selected$text)
tostring(selected$text)
output <- tostring(selected$text)
select_pos
select_pos <- doc$selections[[1]]$range[1]
select_pos
select_pos <- doc$selection[[1]]$range[1]
select_pos
selection2str <- function() {
doc <- rstudioapi::getActiveDocumentContext()
id <- doc$id
selected <- doc$selection[[1]]
message(selected)
select_pos <- doc$selection[[1]]$range[1]
if (nchar(selected$text) > 0) {
print(selected$text)
output <- tostring(selected$text)
} else {
output <- ""
}
rstudioapi::insertText(select_pos, output, id)
}
selection2str()
?rstudioapi::insertText
select_pos
select_pos$start
selection2str <- function() {
doc <- rstudioapi::getActiveDocumentContext()
id <- doc$id
selected <- doc$selection[[1]]
message(selected)
select_pos <- doc$selection[[1]]$range[1]
if (nchar(selected$text) > 0) {
print(selected$text)
output <- tostring(selected$text)
} else {
output <- ""
}
rstudioapi::insertText(select_pos$start, output, id)
}
selection2str()
tostring(selected$text)
paste(tostring(selected$text),"\n")
paste0(tostring(selected$text),"\n")
selection2str <- function() {
doc <- rstudioapi::getActiveDocumentContext()
id <- doc$id
selected <- doc$selection[[1]]
message(selected)
select_pos <- doc$selection[[1]]$range[1]
if (nchar(selected$text) > 0) {
print(selected$text)
output <- paste0(tostring(selected$text),"\n")
} else {
output <- ""
}
rstudioapi::insertText(select_pos$start, output, id)
}
selection2str()selection2str()
selection2str()
library(scriptResume)
selected$text
select_pos <- doc$selection[[1]]$range[1]
select_pos
doc$selection
print(doc$selection)
message(doc$selection)
print(doc$selection$range)
doc$selection[[1]]$range[1]
selection2str <- function() {
doc <- rstudioapi::getActiveDocumentContext()
id <- doc$id
selected <- doc$selection[[1]]$text
message(selected)
select_pos <- doc$selection[[1]]$range[1]
if (nchar(selected) > 0) {
print(selected)
output <- paste0(tostring(selected),"\n")
} else {
output <- ""
}
print("done converting")
rstudioapi::insertText(select_pos$start, output, id)
}
selection2str()
message(sprintf("You have selected",selected))
message(sprintf("You have selected %s",selected))
message(sprintf("You have selected:\n %s",selected))
selected <- doc$selection[[1]]$text
select_pos <- doc$selection[[1]]$range[1]
selected <- doc$selection[[1]]$text
message(sprintf("You have selected:\n %s",selected))
doc$selection[[1]]$range
selection2str <- function() {
doc <- rstudioapi::getActiveDocumentContext()
id <- doc$id
selected <- doc$selection[[1]]$text
select_pos <- doc$selection[[1]]$range[1]
if (nchar(selected) > 0) {
message(sprintf("You have selected:\n %s",selected))
print("positive selection")
output <- paste0(tostring(selected),"\n")
} else {
output <- ""
}
print("done converting")
rstudioapi::insertText(select_pos$start, output, id)
}
selection2str <- function() {
doc <- rstudioapi::getActiveDocumentContext()
id <- doc$id
selected <- doc$selection[[1]]$text
select_pos <- doc$selection[[1]]$range[1]
if (nchar(selected) > 0) {
message(sprintf("You have selected:\n %s",selected))
output <- paste0(tostring(selected),"\n")
} else {
message("Nothing selected.")
output <- ""
}
print("done converting")
rstudioapi::insertText(select_pos$start, output, id)
}
selection2str()
library(scriptResume)
?rstudioapi::insertText
library(scriptResume)
doc$selection[[1]]$range[
1]
doc$selection[[1]]$range
library(scriptResume)
a, b, c
tostring(selected)
selected = "a, b, c"
paste0(tostring(selected),"\n")
tostring(selected)
paste0(tostring(selected),"\n", collapse = '')
paste0(tostring(selected),"\n", collapse = '\"\"')
paste0(tostring(selected), collapse = '\"\"')
tostring(selected)
parts <- tostring(selected)
parts
stringr::str_c(parts)
stringr::str_c(parts, collapse = NULL)
output
output <-  stringr::str_c(parts, collapse = NULL)
output
length(output)
class(output)
length(parts)
rstudioapi::insertText(select_pos, output, id)
rstudioapi::insertText(c(2,2), output, id)
message(output)
output <-  stringr::str_c(parts, collapse = '"')
output
class(output)
length(output)
#' Convert object tostring
#' @param line a char vector.
#'
#' @return quoted test
#' @export
#' # ADD_EXAMPLES_HERE
line = "a, b, c"
stringr::str_split(line, ",")[[1]]
splited <- stringr::str_split(line, ",")[[1]]
stringr::str_pad(splited,1,"both",'"')
trimmed <-  stringr::str_trim(splited, "both")
stringr::str_pad(trimmed,1,"both",'"')
padded <- stringr::str_pad(trimmed,1,"both",'"')
padded
length(padded)
class(padded)
stringr::str_c(padded, collapse = ',')
padded <- stringr::str_pad(trimmed,1,"both",'\"')
padded
stringr::str_c(padded, collapse = ',')
padded <- stringr::str_pad(trimmed,1,"both",'\\"')
stringr::str_c(padded, collapse = ',')
padded <- stringr::str_pad(trimmed,1,"both",'\"')
padded
stringr::str_c(padded, collapse = ',')
stringr::str_c(padded, collapse = '')
padded <- stringr::str_pad(trimmed,1,"both","'")
stringr::str_c(padded, collapse = '')
glue::glue(padded{","})
? glue::glue
padded
glue::glue("{padded}")
padded
sprintf("%s",padded)
length(sprintf("%s",padded))
deparse1(padded)
length(deparse1(padded))
selection2str <- function() {
doc <- rstudioapi::getActiveDocumentContext()
id <- doc$id
selected <- doc$selection[[1]]$text
select_pos <- doc$selection[[1]]$range
if (nchar(selected) > 0) {
message(sprintf("You have selected:\n %s",selected))
output <- tostring(selected)
message(output)
} else {
message("Nothing selected.")
output <- ""
}
print(select_pos)
rstudioapi::insertText(select_pos, output, id)
}
library(scriptResume)
